const translations = {
    'ua': {
        'names': 'Ð“Ð°Ð½Ð½Ð° & Ð’Ð»Ð°Ð´Ð¸ÑÐ»Ð°Ð²',
        'hero-subtitle': 'ÐœÐ¸ Ð¾Ð´Ñ€ÑƒÐ¶ÑƒÑ”Ð¼Ð¾ÑÑŒ!',
        'date': 'Ð—Ð±ÐµÑ€ÐµÐ¶Ð¸ Ð´Ð°Ñ‚Ñƒ - 19.09.2026',
        'info-title': 'Ð”Ðµ Ñ‚Ð° ÐºÐ¾Ð»Ð¸',
        'location': 'Ð‘Ñ€Ð°Ñ‚Ð¸ÑÐ»Ð°Ð²Ð°, Ð³Ð¾Ñ‚ÐµÐ»ÑŒ "Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»"',
        'time': 'ÐŸÐ¾Ñ‡Ð°Ñ‚Ð¾Ðº Ð¾ 16:00',
        'timer-text': 'Ð”Ð¾ Ð½Ð°ÑˆÐ¾Ð³Ð¾ ÑÐ²ÑÑ‚Ð° Ð·Ð°Ð»Ð¸ÑˆÐ¸Ð»Ð¾ÑÑŒ:',
        'footer': 'Ð§ÐµÐºÐ°Ñ”Ð¼Ð¾ Ð½Ð° Ð²Ð°Ñ!',
        'rsvp-title': 'ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ Ð¿Ñ€Ð¸ÑÑƒÑ‚Ð½Ð¾ÑÑ‚Ñ–',
        'rsvp-subtitle': 'Ð‘ÑƒÐ´ÑŒ Ð»Ð°ÑÐºÐ°, Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ñ‚Ðµ Ð½Ð°Ð¼ Ð¿Ñ€Ð¾ Ð²Ð°ÑˆÑƒ ÑƒÑ‡Ð°ÑÑ‚ÑŒ Ð´Ð¾ 01.06.2026',
        'label-name': 'Ð’Ð°ÑˆÐµ Ñ–Ð¼\'Ñ Ñ‚Ð° Ð¿Ñ€Ñ–Ð·Ð²Ð¸Ñ‰Ðµ',
        'option-yes': 'Ð¯ Ð¿Ñ€Ð¸Ð¹Ð´Ñƒ',
        'option-no': 'ÐÐ° Ð¶Ð°Ð»ÑŒ, Ð½Ðµ Ð·Ð¼Ð¾Ð¶Ñƒ',
        'submit-btn': 'ÐÐ°Ð´Ñ–ÑÐ»Ð°Ñ‚Ð¸',
        'location': 'Ð›Ð¾ÐºÐ°Ñ†Ñ–Ñ',
        "dresscode-title": "Ð”Ñ€ÐµÑ-ÐºÐ¾Ð´",
        "dress-code-description": "Ð’Ð´ÑÐ³Ð°Ð¹Ñ‚Ðµ Ñ‚Ðµ, Ñƒ Ñ‡Ð¾Ð¼Ñƒ Ð²Ð°Ð¼ Ð±ÑƒÐ´Ðµ Ð·Ñ€ÑƒÑ‡Ð½Ð¾ Ñ– Ð²ÐµÑÐµÐ»Ð¾ðŸ’ƒ ÐÐ»Ðµ Ð½Ð°Ð¼ Ð±ÑƒÐ´Ðµ Ð´ÑƒÐ¶Ðµ Ð¿Ñ€Ð¸Ñ”Ð¼Ð½Ð¾, ÑÐºÑ‰Ð¾ Ð²Ð¸ Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼Ð°Ñ”Ñ‚Ðµ ÐºÐ¾Ð»ÑŒÐ¾Ñ€Ð¸ Ð½Ð°ÑˆÐ¾Ð³Ð¾ ÑÐ²ÑÑ‚Ð° Ñƒ ÑÐ²Ð¾Ñ—Ñ… Ð¾Ð±Ñ€Ð°Ð·Ð°Ñ…",
        "color-forest": "Ð¢ÐµÐ¼Ð½Ð¾-Ñ…Ð²Ð¾Ð¹Ð½Ð¸Ð¹",
        "color-olive": "ÐžÐ»Ð¸Ð²ÐºÐ¾Ð²Ð¸Ð¹",
        "color-dark-beige": "Ð¢ÐµÐ¼Ð½Ð¸Ð¹ Ð±ÐµÐ¶",
        "color-light-beige": "Ð¡Ð²Ñ–Ñ‚Ð»Ð¸Ð¹ Ð±ÐµÐ¶",
        "color-sand": "ÐŸÑ–ÑÐ¾Ñ‡Ð½Ð¸Ð¹",
        "housing-yes": "Ð¢Ð°Ðº, Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð°",
        "housing-no": "ÐÑ–, Ð´ÑÐºÑƒÑŽ. Ð¯ Ð²Ð¸Ñ€Ñ–ÑˆÑƒ Ñ†Ðµ Ð¿Ð¸Ñ‚Ð°Ð½Ð½Ñ ÑÐ°Ð¼Ð¾ÑÑ‚Ñ–Ð¹Ð½Ð¾.",
        "housing-question": "Ð§Ð¸ Ð²Ð°Ð¼ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð° Ð´Ð¾Ð¿Ð¾Ð¼Ð¾Ð³Ð° Ð· Ð¶Ð¸Ñ‚Ð»Ð¾Ð¼ Ð½Ð° Ñ‡Ð°Ñ ÑÐ²ÑÑ‚ÐºÑƒÐ²Ð°Ð½Ð½Ñ?",
        "p1Gifts": "Ð’Ð°ÑˆÐ° Ð¿Ñ€Ð¸ÑÑƒÑ‚Ð½Ñ–ÑÑ‚ÑŒ Ð½Ð° Ð½Ð°ÑˆÐ¾Ð¼Ñƒ ÑÐ²ÑÑ‚Ñ– â€” Ñ†Ðµ Ð²Ð¶Ðµ Ð½Ð°Ð¹Ð±Ñ–Ð»ÑŒÑˆÐ¸Ð¹ Ð´Ð°Ñ€ÑƒÐ½Ð¾Ðº Ð´Ð»Ñ Ð½Ð°Ñ. ÐœÐ¸ Ð´ÑƒÐ¶Ðµ Ñ†Ñ–Ð½ÑƒÑ”Ð¼Ð¾ Ð²Ð°ÑˆÑƒ ÑƒÐ²Ð°Ð³Ñƒ, Ð°Ð»Ðµ ÑÐºÑ‰Ð¾ Ð²Ð¸ Ð²ÑÐµ Ñ‚Ð°ÐºÐ¸ Ð²Ð¸Ñ€Ñ–ÑˆÐ¸Ñ‚Ðµ Ñ‰Ð¾ÑÑŒ Ð½Ð°Ð¼ Ð¿Ð¾Ð´Ð°Ñ€ÑƒÐ²Ð°Ñ‚Ð¸, Ñ‚Ð¾ Ð½Ð°Ð¹ÐºÑ€Ð°Ñ‰Ð¸Ð¼ Ð²Ð°Ñ€Ñ–Ð°Ð½Ñ‚Ð¾Ð¼ Ð±ÑƒÐ´Ðµ Ñ„Ñ–Ð½Ð°Ð½ÑÐ¾Ð²Ð° Ð¿Ñ–Ð´Ñ‚Ñ€Ð¸Ð¼ÐºÐ° ðŸ’¸ðŸ˜Š",
        "p2Gifts": "Ð¦Ðµ Ð´Ð¾Ð¿Ð¾Ð¼Ð¾Ð¶Ðµ Ð½Ð°Ð¼ Ð½Ð°Ð±Ð»Ð¸Ð·Ð¸Ñ‚Ð¸ Ð·Ð´Ñ–Ð¹ÑÐ½ÐµÐ½Ð½Ñ ÑÐ¿Ñ–Ð»ÑŒÐ½Ð¾Ñ— Ð¼Ñ€Ñ–Ñ— Ð¿Ñ€Ð¾ Ð²Ð»Ð°ÑÐ½Ðµ Ð·Ð°Ñ‚Ð¸ÑˆÐ½Ðµ Ð³Ð½Ñ–Ð·Ð´ÐµÑ‡ÐºÐ¾ Ñ‚Ð° Ð¿ÐµÑ€ÑˆÑƒ ÑÑ–Ð¼ÐµÐ¹Ð½Ñƒ Ð¿Ð¾Ð´Ð¾Ñ€Ð¾Ð¶âœ¨ðŸŒ",
        "p3Gifts": "ÐœÐ¸ Ð²Ð°Ð¼ Ð±ÐµÐ·Ð¼ÐµÐ¶Ð½Ð¾ Ð²Ð´ÑÑ‡Ð½Ñ–!",
        "titleGifts": "ÐŸÐ¾Ð±Ð°Ð¶Ð°Ð½Ð½Ñ Ñ‰Ð¾Ð´Ð¾ Ð¿Ð¾Ð´Ð°Ñ€ÑƒÐ½ÐºÑ–Ð²",
        "location-details": "ÐŸÑ€Ð¾ Ñ‚Ð¾Ñ‡Ð½Ñ– Ñ‡Ð°Ñ Ñ– Ð¼Ñ–ÑÑ†Ðµ Ð±ÑƒÐ´Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð¾ Ð¾ÑÐ¾Ð±Ð¸ÑÑ‚Ð¾.",
        "location-details-small": "(Ð’Ñ€Ð°Ñ…Ð¾Ð²ÑƒÐ¹Ñ‚Ðµ Ñ‡Ð°Ñ Ð½Ð° Ð´Ð¾Ñ€Ð¾Ð³Ñƒ Ñƒ ÑÐ²Ð¾Ñ—Ñ… Ð¿Ð¾Ð´Ð¾Ñ€Ð¾Ð¶Ð°Ñ…, Ñ‰Ð¾Ð± Ð²Ð¸ Ð¼Ð°Ð»Ð¸ Ñ‡Ð°Ñ Ð²Ñ–Ð´Ð¿Ð¾Ñ‡Ð¸Ñ‚Ð¸ Ð´Ð¾ Ñ‚Ð° Ð¿Ñ–ÑÐ»Ñ ÑÐ²ÑÑ‚Ð°)"
    },
    'sk': {
        'names': 'Hanna & Vladyslav',
        'hero-subtitle': 'Berieme sa!',
        'date': 'Save the date - 19.09.2026',
        'info-title': 'Kde a kedy',
        'location': 'Bratislava, hotel "Central"',
        'time': 'ZaÄiatok o 16:00',
        'timer-text': 'Do naÅ¡ej svadby zostÃ¡va:',
        'footer': 'TeÅ¡Ã­me sa na vÃ¡s!',
        'rsvp-title': 'Potvrdenie ÃºÄasti',
        'rsvp-subtitle': 'ProsÃ­me, dajte nÃ¡m vedieÅ¥ do 01.06.2026',
        'label-name': 'VaÅ¡e meno a priezvisko',
        'option-yes': 'PrÃ­dem',
        'option-no': 'BohuÅ¾iaÄ¾ nemÃ´Å¾em',
        'submit-btn': 'OdoslaÅ¥',
        'location': 'Localita',
        "dresscode-title": "Dresscode",
        "dress-code-description": "ObleÄte si to, v Äom sa budete cÃ­tiÅ¥ pohodlne a v Äom sa vÃ¡m bude dobre zabÃ¡vaÅ¥ ðŸ’ƒ Ale veÄ¾mi nÃ¡s poteÅ¡Ã­, ak svoje obleÄenie zladÃ­te s farbami naÅ¡ej svadby.",
        "color-forest": "TmavozelenÃ¡",
        "color-olive": "OlivovÃ¡",
        "color-dark-beige": "TmavobÃ©Å¾ovÃ¡",
        "color-light-beige": "SvetlobÃ©Å¾ovÃ¡",
        "color-sand": "PieskovÃ¡",
        "housing-yes": "Ste tu jedinÃ­ SlovÃ¡ci a aj tak Å¾ijete v Bratislave, takÅ¾e aj tak nie. ",
        "housing-no": "Nie.",
        "housing-question": "Potrebujete pomoc s ubytovanÃ­m poÄas oslÃ¡vy?",
        "p1Gifts": "To, Å¾e prÃ­dete oslÃ¡viÅ¥ s nami, je pre nÃ¡s ten najvÃ¤ÄÅ¡Ã­ darÄek â€“ naozaj! Ale ak by ste nÃ¡s predsa len chceli poteÅ¡iÅ¥ eÅ¡te nieÄÃ­m navyÅ¡e, najviac sa poteÅ¡Ã­me finanÄnÃ©mu prÃ­spevku ðŸ’¸ðŸ˜Š",
        "p2Gifts": "PomÃ´Å¾e nÃ¡m to posunÃºÅ¥ sa o krok bliÅ¾Å¡ie k nÃ¡Å¡mu snu o vlastnom Ãºtulnom hniezdoÄku a k naÅ¡ej prvej rodinnej dovolenke âœ¨ðŸŒ",
        "p3Gifts": "ÄŽAKUJEME z celÃ©ho srdca!",
        "titleGifts": "MalÃ½ tip na darÄeky",
        "location-details": "O presnom Äase a mieste vÃ¡s budeme informovaÅ¥ osobne.",
        "location-details-small": " "

    }
};

function changeLanguage(lang) {
    const elements = document.querySelectorAll('[data-key]');
    elements.forEach(el => {
        const key = el.getAttribute('data-key');
        if (translations[lang] && translations[lang][key]) {
            el.textContent = translations[lang][key];
        }
    });
    document.documentElement.lang = lang;
}

// Ð—Ð¼Ñ–Ð½Ð½Ð° Ð´Ð»Ñ Ð·Ð±ÐµÑ€Ñ–Ð³Ð°Ð½Ð½Ñ Ð¾ÑÑ‚Ð°Ð½Ð½ÑŒÐ¾Ð³Ð¾ Ð²Ð¸Ð±Ñ€Ð°Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð»ÑŒÐ¾Ñ€Ñƒ
let selectedColorId = null;

document.addEventListener('DOMContentLoaded', () => {
    const circles = document.querySelectorAll('.color-circle');

    circles.forEach(circle => {
        circle.addEventListener('click', function() {
            // Ð¯ÐºÑ‰Ð¾ Ñ†ÐµÐ¹ ÐºÐ¾Ð»Ñ–Ñ€ Ð²Ð¶Ðµ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¸Ð¹ â€” Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð²Ð¸Ð¼Ð¸ÐºÐ°Ñ”Ð¼Ð¾ Ð¹Ð¾Ð³Ð¾
            if (this.classList.contains('active')) {
                this.classList.remove('active');
            } else {
                // Ð¡Ð¿Ð¾Ñ‡Ð°Ñ‚ÐºÑƒ Ð¿Ñ€Ð¸Ð±Ð¸Ñ€Ð°Ñ”Ð¼Ð¾ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ–ÑÑ‚ÑŒ Ñƒ Ð²ÑÑ–Ñ… Ñ–Ð½ÑˆÐ¸Ñ…
                circles.forEach(c => c.classList.remove('active'));
                // Ð”Ð¾Ð´Ð°Ñ”Ð¼Ð¾ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ–ÑÑ‚ÑŒ Ð¿Ð¾Ñ‚Ð¾Ñ‡Ð½Ð¾Ð¼Ñƒ
                this.classList.add('active');
            }
        });
    });

    // ÐžÐ¿Ñ†Ñ–Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾: ÐºÐ»Ñ–Ðº Ð² Ð±ÑƒÐ´ÑŒ-ÑÐºÐ¾Ð¼Ñƒ Ñ–Ð½ÑˆÐ¾Ð¼Ñƒ Ð¼Ñ–ÑÑ†Ñ– Ð¿Ñ€Ð¸Ð±Ð¸Ñ€Ð°Ñ” Ð·Ð±Ñ–Ð»ÑŒÑˆÐµÐ½Ð½Ñ
    document.addEventListener('click', (e) => {
        if (!e.target.classList.contains('color-circle')) {
            circles.forEach(c => c.classList.remove('active'));
        }
    });
});

function createLeaf() {
    const container = document.getElementById('leaf-container');
    if (!container) return;

    const leaf = document.createElement('div');
    leaf.classList.add('leaf');
    
    // Ð’Ð¸Ð¿Ð°Ð´ÐºÐ¾Ð²Ñ– Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¸
    const size = Math.random() * 15 + 10 + 'px';
    leaf.style.width = size;
    leaf.style.height = size;
    leaf.style.left = Math.random() * 100 + 'vw';
    
    const duration = Math.random() * 5 + 7 + 's';
    leaf.style.animation = `fall ${duration} linear forwards`;

    container.appendChild(leaf);

    // Ð’Ð¸Ð´Ð°Ð»ÑÑ”Ð¼Ð¾ Ð»Ð¸ÑÑ‚Ð¾Ðº Ð¿Ñ–ÑÐ»Ñ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð½Ñ Ð°Ð½Ñ–Ð¼Ð°Ñ†Ñ–Ñ—
    setTimeout(() => {
        leaf.remove();
    }, parseFloat(duration) * 1000);
}

// Ð—Ð°Ð¿ÑƒÑÐº Ð°Ð½Ñ–Ð¼Ð°Ñ†Ñ–Ñ—
setInterval(createLeaf, 800);

// Ð¡Ñ‚Ð²Ð¾Ñ€ÑŽÑ”Ð¼Ð¾ Ð½Ð¾Ð²Ñƒ Ð¿ÐµÐ»ÑŽÑÑ‚ÐºÑƒ ÐºÐ¾Ð¶Ð½Ñ– 400 Ð¼Ñ–Ð»Ñ–ÑÐµÐºÑƒÐ½Ð´
setInterval(createLeaf, 400);

document.querySelectorAll('.color-circle').forEach(circle => {
    circle.addEventListener('click', function() {
        // Ð’Ð¸Ð·Ð½Ð°Ñ‡Ð°Ñ”Ð¼Ð¾ Ð¿Ð¾Ñ‚Ð¾Ñ‡Ð½Ñƒ Ð¼Ð¾Ð²Ñƒ (Ð·Ð±ÐµÑ€Ñ–Ð³Ð°Ñ”Ð¼Ð¾ Ñ—Ñ— Ð² Ð·Ð¼Ñ–Ð½Ð½Ñƒ Ð¿Ñ€Ð¸ Ð¿ÐµÑ€ÐµÐ¼Ð¸ÐºÐ°Ð½Ð½Ñ– Ð¼Ð¾Ð²)
        const currentLang = document.documentElement.lang || 'ua'; 
        
        // Ð‘ÐµÑ€ÐµÐ¼Ð¾ Ð½Ð°Ð·Ð²Ñƒ Ð· Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð½Ð¾Ð³Ð¾ Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ‚Ð°
        const colorName = currentLang === 'ua' ? this.dataset.nameUa : this.dataset.nameSk;
        
        const display = document.getElementById('color-name');
        display.textContent = colorName;
        display.classList.add('show');
        
        // Ð’Ñ–Ð·ÑƒÐ°Ð»ÑŒÐ½Ð¾ Ð²Ð¸Ð´Ñ–Ð»ÑÑ”Ð¼Ð¾ Ð°ÐºÑ‚Ð¸Ð²Ð½Ðµ ÐºÐ¾Ð»Ð¾
        document.querySelectorAll('.color-circle').forEach(c => c.classList.remove('active'));
        this.classList.add('active');
    });
});
window.onscroll = function() {
    updateScroll();
};

function updateScroll() {
    const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
    const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
    const scrolled = (winScroll / height) * 100;
    
    // ÐžÐ½Ð¾Ð²Ð»ÑŽÑ”Ð¼Ð¾ Ð»Ñ–Ð½Ñ–ÑŽ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑƒ
    document.getElementById("progress-bar").style.width = scrolled + "%";
    
    // ÐŸÐ¾ÐºÐ°Ð·ÑƒÑ”Ð¼Ð¾ ÐºÐ½Ð¾Ð¿ÐºÑƒ RSVP
    const btn = document.getElementById("floatingBtn");
    if (winScroll > 300) {
        btn.classList.add("show");
    } else {
        btn.classList.remove("show");
    }
}
document.addEventListener('DOMContentLoaded', function() {
    const attendanceYes = document.getElementById('attendance-yes');
    const attendanceNo = document.getElementById('attendance-no');
    const accommodationBlock = document.getElementById('accommodation-block');
    const housingInputs = document.querySelectorAll('input[name="housing_needed"]');

    function toggleAccommodation() {
        if (attendanceYes.checked) {
            accommodationBlock.style.display = 'block';
            // Ð Ð¾Ð±Ð¸Ð¼Ð¾ Ð²Ð¸Ð±Ñ–Ñ€ Ð¶Ð¸Ñ‚Ð»Ð° Ð¾Ð±Ð¾Ð²'ÑÐ·ÐºÐ¾Ð²Ð¸Ð¼, ÑÐºÑ‰Ð¾ Ð»ÑŽÐ´Ð¸Ð½Ð° Ð¿Ñ€Ð¸Ð¹Ð´Ðµ
            housingInputs.forEach(input => input.required = true);
        } else {
            accommodationBlock.style.display = 'none';
            // Ð—Ð½Ñ–Ð¼Ð°Ñ”Ð¼Ð¾ Ð¾Ð±Ð¾Ð²'ÑÐ·ÐºÐ¾Ð²Ñ–ÑÑ‚ÑŒ, ÑÐºÑ‰Ð¾ Ð»ÑŽÐ´Ð¸Ð½Ð° Ð½Ðµ Ð¿Ñ€Ð¸Ð¹Ð´Ðµ (Ñ‰Ð¾Ð± Ñ„Ð¾Ñ€Ð¼Ð° Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°ÑÑŒ)
            housingInputs.forEach(input => {
                input.required = false;
                input.checked = false; // Ð¡ÐºÐ¸Ð´Ð°Ñ”Ð¼Ð¾ Ð²Ð¸Ð±Ñ–Ñ€
            });
        }
    }

    // Ð¡Ð»ÑƒÑ…Ð°Ñ”Ð¼Ð¾ Ð·Ð¼Ñ–Ð½Ð¸
    attendanceYes.addEventListener('change', toggleAccommodation);
    attendanceNo.addEventListener('change', toggleAccommodation);

    // Ð—Ð°Ð¿ÑƒÑÐºÐ°Ñ”Ð¼Ð¾ Ð¾Ð´Ð¸Ð½ Ñ€Ð°Ð· Ð¿Ñ€Ð¸ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð½Ñ–, Ñ‰Ð¾Ð± Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€Ð¸Ñ‚Ð¸ Ð¿Ð¾Ñ‡Ð°Ñ‚ÐºÐ¾Ð²Ð¸Ð¹ ÑÑ‚Ð°Ð½
    toggleAccommodation();
});

document.addEventListener('DOMContentLoaded', () => {
    const mascot = document.querySelector('.mascot-animation');
    if (!mascot) return;

    let lastPos = 0;
    let isEscaping = false;
    let currentDirection = 'right'; // Ð’Ñ–Ð´ÑÑ‚ÐµÐ¶ÑƒÑ”Ð¼Ð¾ Ð½Ð°Ð¿Ñ€ÑÐ¼Ð¾Ðº

    const startNewRun = (delay = 1000) => {
        isEscaping = false;
        mascot.style.transition = 'none'; 
        mascot.style.animation = 'none';
        mascot.style.opacity = '1';
        
        setTimeout(() => {
            const vhToPx = (vh) => (vh * window.innerHeight) / 100;
            let newPosVH;
            let valid = false;
            let attempts = 0;

            while (!valid && attempts < 20) {
                const isBottomZone = Math.random() > 0.5;
                newPosVH = isBottomZone ? (Math.random() * 20 + 5) : (Math.random() * 15 + 75);
                if (Math.abs(vhToPx(newPosVH) - lastPos) > 150) {
                    valid = true;
                    lastPos = vhToPx(newPosVH);
                }
                attempts++;
            }

            mascot.style.bottom = newPosVH + 'vh';

            const runFromLeft = Math.random() > 0.5;
            currentDirection = runFromLeft ? 'right' : 'left';
            const animName = runFromLeft ? 'runRight' : 'runLeft';
            const duration = Math.random() * 4 + 8;

            // Ð¡ÐºÐ¸Ð´Ð°Ñ”Ð¼Ð¾ Ð¿Ð¾Ð·Ð¸Ñ†Ñ–ÑŽ Ð¿ÐµÑ€ÐµÐ´ ÑÑ‚Ð°Ñ€Ñ‚Ð¾Ð¼
            mascot.style.left = runFromLeft ? '-250px' : '115%';
            
            mascot.style.animation = `${animName} ${duration}s linear forwards, bounceEffect 2s ease-in-out infinite alternate`;
        }, delay); 
    };

    mascot.addEventListener('mousedown', () => {
        if (isEscaping) return;
        
        isEscaping = true;

        // 1. Ð¤Ñ–ÐºÑÑƒÑ”Ð¼Ð¾ Ð¿Ð¾Ñ‚Ð¾Ñ‡Ð½Ñƒ Ð¿Ð¾Ð·Ð¸Ñ†Ñ–ÑŽ
        const rect = mascot.getBoundingClientRect();
        mascot.style.animation = 'none';
        mascot.style.left = rect.left + 'px';


        const escapeTarget = (currentDirection === 'right') ? '120%' : '-300px';

        requestAnimationFrame(() => {
            mascot.style.transition = 'left 0.7s ease-in'; 
            mascot.style.left = escapeTarget;
        });

        // 3. ÐŸÐ°ÑƒÐ·Ð° 10 ÑÐµÐºÑƒÐ½Ð´
        setTimeout(() => {
            mascot.style.opacity = '0';
            startNewRun(5000);
        }, 700);
    });

    mascot.addEventListener('animationend', (e) => {
        if (isEscaping) return;
        if (e.animationName === 'runRight' || e.animationName === 'runLeft') {
            startNewRun();
        }
    });

    startNewRun();
});